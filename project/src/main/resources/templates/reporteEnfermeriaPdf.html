<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte PDF</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/95789fc486.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container mt-4">
        <h1 class="mb-4">
            Reporte de Enfermería
            <i class="fa-solid fa-laptop-medical" style="color: #aa1f23;"></i>
        </h1>

        <!-- Información del Reporte -->
        <div class="card mb-4">
            <div class="card-header">
                <h2 class="mb-0">
                    Información del Reporte
                    &nbsp;
                    <i class="fa-solid fa-hospital-user" style="color: #1d2d62;"></i>
                </h2>
            </div>
            <div class="card-body">
                <table class="table table-bordered">
                    <tbody>
                        <!-- Paciente -->
                        <tr>
                            <th scope="row">Paciente</th>
                            <td
                                th:text="${reporte.nombrePaciente} + ' ' + ${reporte.apellidoPaciente} + ' - ' + ${reporte.idPaciente}">
                            </td>
                        </tr>
                        <!-- Empleado -->
                        <tr>
                            <th scope="row">Empleado</th>
                            <td
                                th:text="${reporte.nombreProfesional} + ' ' + ${reporte.apellidoProfesional} + ' - ' + ${reporte.idProfesional}">
                            </td>
                        </tr>
                        <!-- Número de Agenda -->
                        <tr>
                            <th scope="row">N° Agenda</th>
                            <td th:text="${reporte.idAgenda}"></td>
                        </tr>
                        <!-- Número de Historia Clínica -->
                        <tr>
                            <th scope="row">N° Historia</th>
                            <td th:text="${reporte.idHistoriaClinica}"></td>
                        </tr>
                        <!-- Fecha de la Historia Clínica -->
                        <tr>
                            <th scope="row">Fecha de la Historia</th>
                            <td th:text="${#dates.format(reporte.fechaHistoria, 'yyyy-MM-dd')}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Signos Vitales -->
        <div class="card mb-4">
            <div class="card-header">
                <h2 class="mb-0">
                    Signos Vitales
                    &nbsp;
                    <i class="fa-solid fa-file-waveform" style="color: #1d2d62;"></i>
                </h2>
            </div>
            <div class="card-body">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Signo Vital</th>
                            <th>Valores</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Frecuencia Cardiaca</td>
                            <td th:text="${reporte.frecuenciaCardiaca} + ' Bpm'"></td>
                        </tr>
                        <tr>
                            <td>Presión Arterial</td>
                            <td th:text="${reporte.presionArterial} + ' mmHg'"></td>
                        </tr>
                        <tr>
                            <td>Temperatura</td>
                            <td th:text="${reporte.temperatura} + ' °C'"></td>
                        </tr>
                        <tr>
                            <td>Saturación Oxígeno</td>
                            <td th:text="${reporte.saturacionOxigeno} + ' %'"></td>
                        </tr>
                        <tr>
                            <td>Frecuencia Respiratoria</td>
                            <td th:text="${reporte.frecuenciaRespiratoria} + ' Rpm'"></td>
                        </tr>
                        <tr>
                            <td>Glucosa</td>
                            <td th:text="${reporte.glucosa} + ' mg/dL'"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Medicamentos -->
        <div class="card mb-4">
            <div class="card-header">
                <h2 class="mb-0">
                    Medicamentos
                    &nbsp;
                    <i class="fa-solid fa-prescription-bottle-medical" style="color: #1d2d62;"></i>
                </h2>
            </div>
            <div class="card-body">
                <p class="card-text" th:text="${reporte.medicamentos}"></p>
            </div>
        </div>

        <!-- Nota de Enfermería -->
        <div class="card mb-4">
            <div class="card-header">
                <h2 class="mb-0">
                    Nota de Enfermería
                    &nbsp;
                    <i class="fa-solid fa-notes-medical" style="color: #1d2d62;"></i>
                </h2>
            </div>
            <div class="card-body">
                <p class="card-text" th:text="${reporte.notaEnfermeria}"></p>
            </div>
        </div>

        <!-- Actividad -->
        <div class="card mb-4">
            <div class="card-header">
                <h2 class="mb-0">
                    Actividad
                    &nbsp;
                    <i class="fa-solid fa-comment-medical" style="color: #1d2d62;"></i>
                </h2>
            </div>
            <div class="card-body">
                <p class="card-text" th:text="${reporte.actividad}"></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script th:inline="javascript">
        window.onload = function () {
            setTimeout(function () {
                window.print(); 

                window.onafterprint = function () {
                    window.location.href = document.referrer;
                };

                setTimeout(function () {
                    window.location.href = document.referrer;
                }, 500); 

            }, 500); 
        };
    </script>
</body>

</html>